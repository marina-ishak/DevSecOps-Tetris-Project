{"ast":null,"code":"import _slicedToArray from \"/Users/davidnabilgerges/Downloads/End-to-End-Kubernetes-DevSecOps-Tetris-Project/Tetris-V2/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/davidnabilgerges/Downloads/End-to-End-Kubernetes-DevSecOps-Tetris-Project/Tetris-V2/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _taggedTemplateLiteral from \"/Users/davidnabilgerges/Downloads/End-to-End-Kubernetes-DevSecOps-Tetris-Project/Tetris-V2/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/davidnabilgerges/Downloads/End-to-End-Kubernetes-DevSecOps-Tetris-Project/Tetris-V2/src/components/Stage/index.js\";\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\n\\twidth: \", \"px;\\n\\t\", \"\\n\\t\", \"\\n\\tmargin-left: \", \"px;\\n\\tmargin-top: \", \"px;\\n\\tdisplay: flex;\\n\\tflex-direction: \", \";\\n\\talign-items: center;\\n\\tjustify-content: \", \";\\n\\tfont-size: \", \"px;\\n\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\n\\t\", \";\\n\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\n\\twidth: \", \"px;\\n\\theight: \", \"px;\\n\\tbackground-color: \", \";\\n\\tposition: relative;\\n\\tz-index: \", \";\\n\\n\\t\", \";\\n\\n\\t\", \";\\n\\n\\t\", \";\\n\\n\\t\", \";\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tjustify-content: center;\\n\\theight: \", \"px;\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n\\twidth: 100%;\\n\\theight: 100%;\\n\\tdisplay: flex;\\n\\tjustify-content: center;\\n\\talign-items: center;\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n\\tborder: \", \"px solid white;\\n\\tbackground-color: \", \";\\n\\ttransition: background-color 0.5s;\\n\\toverflow: hidden;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tjustify-content: center;\\n\\talign-items: center;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n\\twidth: \", \"px;\\n\\theight: \", \"px;\\n\\tbackground-color: \", \";\\n\\ttransition: background-color 0.5;\\n\\tborder: \", \"px solid white;\\n\\toverflow: hidden;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tjustify-content: center;\\n\\talign-items: center;\\n\\tmargin-bottom: \", \"px;\\n\\tmargin-right: \", \"px;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n\\t\", \"\\n\\t\", \"\\n\\tmargin-right: \", \"px;\\n\\tmargin-bottom: \", \"px;\\n\\tdisplay: flex;\\n\\tflex-direction: \", \";\\n\\tjustify-content: \", \";\\n\\talign-items: center;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n\\twidth: 100vw;\\n\\theight: \", \"vh;\\n\\tdisplay: flex;\\n\\tflex-direction: \", \";\\n\\tjustify-content: center;\\n\\talign-items: center;\\n\\tbackground-image: url(\", \");\\n\\tbackground-size: cover;\\n\\tbackground-position: center;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport Switch from \"react-switch\";\nimport useWindowDimensions from \"../../hooks/useWindowDimensions\";\nimport background from \"../../images/background.jpg\";\nimport StatusRow from \"../StatusRow\";\nimport LoseGame from '../LoseGame';\nimport Color from \"color\";\nvar Game = styled.div(_templateObject(), function (props) {\n  return props.portrait ? \"95\" : \"100\";\n}, function (props) {\n  return props.portrait ? \"column\" : \"row\";\n}, background);\nvar ContainerNext = styled.div(_templateObject2(), function (props) {\n  return !props.portrait && \"height: \".concat(props.pixelSize * 18 + 18 / 3 * 1, \"px;\");\n}, function (props) {\n  return props.portrait && \"width: \".concat(props.pixelSize * 10 + 10 / 3 * 1, \"px;\");\n}, function (props) {\n  return props.portrait ? 0 : props.pixelSize / 3;\n}, function (props) {\n  return props.portrait ? props.pixelSize / 3 : 0;\n}, function (props) {\n  return props.portrait ? \"row\" : \"column\";\n}, function (props) {\n  return props.portrait ? \"space-between\" : \"flex-start\";\n});\nvar Next = styled.div(_templateObject3(), function (props) {\n  return props.pixelSize * 3;\n}, function (props) {\n  return props.pixelSize * 3;\n}, function (props) {\n  return props.theme3d ? \"#444\" : \"black\";\n}, function (props) {\n  return props.pixelSize / 10;\n}, function (props) {\n  return props.portrait ? 0 : props.pixelSize / 3;\n}, function (props) {\n  return !props.portrait ? 0 : props.pixelSize / 3;\n});\nvar StyledStage = styled.div(_templateObject4(), function (props) {\n  return props.pixelSize / 10;\n}, function (props) {\n  return props.theme3d ? \"#444\" : \"black\";\n});\nvar Center = styled.div(_templateObject5());\nvar Row = styled.div(_templateObject6(), function (props) {\n  return props.stage ? props.pixelSize : props.pixelSize / 1.6;\n});\nvar Pixel = React.memo(styled.div(_templateObject7(), function (props) {\n  return props.stage ? props.pixelSize : props.pixelSize / 1.6;\n}, function (props) {\n  return props.stage ? props.pixelSize : props.pixelSize / 1.6;\n}, function (props) {\n  return props.fill === 1 ? props.color : \"inherited\";\n}, function (props) {\n  return props.zIndex;\n}, function (props) {\n  return props.paused && \"\\n\\t\\ttransition: all 1s;\\n\\t\";\n}, function (props) {\n  return props.fill && props.theme3d && \";\\n\\t\\tbox-shadow: \".concat(props.pixelSize / 4.16, \"px \").concat(props.pixelSize / 4.16, \"px \").concat(props.pixelSize / 5.55, \"px #222\").concat(props.topBloco ? \", 0 \".concat(-props.pixelSize / 4.16, \"px 0 \").concat(Color(props.color).lighten(0.2)) : \"\", \" \\n\\t\");\n}, function (props) {\n  return !props.theme3d && \"\\n\\t\\tborder-left: 1px solid \".concat(props.stage || props.fill || props.hint ? \"#222\" : \"black\", \";\\n\\t\\tborder-top: 1px solid \").concat(props.stage || props.fill || props.hint ? \"#222\" : \"black\", \";\\t\\n\\t\");\n}, function (props) {\n  return props.hint && \"\\n\\t\\tborder: 1px solid \".concat(Color(props.playerColor).alpha(0.5), \";\\n\\t\\tbackground-color: rgba(255,255,255,0.1);\\n\\t\");\n}));\nvar ContainerSwitch = styled.div(_templateObject8(), function (props) {\n  return props.portrait && \"\\n\\t\\theight: 100%;\\n\\t\\twidth: 100%;\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: flex-end;\\n\\t\\tflex-direction: column;\\n\\t\\tjustify-content: flex-end;\\n\\t\";\n});\nvar ContainerStatus = styled.div(_templateObject9(), function (props) {\n  return props.pixelSize * 8;\n}, function (props) {\n  return !props.portrait && \"height: \".concat(props.pixelSize * 18 + 18 / 3 * 1, \"px;\");\n}, function (props) {\n  return props.portrait && \"width: \".concat(props.pixelSize * 10 + 10 / 3 * 1, \"px;\");\n}, function (props) {\n  return props.portrait ? 0 : props.pixelSize / 3;\n}, function (props) {\n  return props.portrait ? props.pixelSize / 3 : 0;\n}, function (props) {\n  return props.portrait ? \"row\" : \"column\";\n}, function (props) {\n  return props.portrait ? \"space-between\" : \"flex-start\";\n}, function (props) {\n  return props.pixelSize;\n});\n\nvar getRenderizacaoBloco = function getRenderizacaoBloco(bloco) {\n  var trimRowBloco = [];\n  var sumColumn = {};\n  bloco.forEach(function (row, y) {\n    var rowSum = 0;\n    row.forEach(function (pixel) {\n      return rowSum = rowSum + pixel;\n    });\n    if (rowSum > 0) trimRowBloco.push(row);\n    row.forEach(function (pixel, x) {\n      sumColumn[x] = (sumColumn[x] ? sumColumn[x] : 0) + pixel;\n    });\n  });\n  var trimBloco = [];\n  trimRowBloco.forEach(function (row, y) {\n    var newRow = [];\n    row.forEach(function (pixel, x) {\n      if (sumColumn[x] > 0) newRow.push(pixel);\n    });\n    trimBloco.push(newRow);\n  });\n  return trimBloco;\n};\n\nvar Stage = function Stage(_ref) {\n  var lose = _ref.lose,\n      restartClick = _ref.restartClick,\n      map = _ref.map,\n      player = _ref.player,\n      hint = _ref.hint,\n      status = _ref.status,\n      paused = _ref.paused,\n      others = _objectWithoutProperties(_ref, [\"lose\", \"restartClick\", \"map\", \"player\", \"hint\", \"status\", \"paused\"]);\n\n  var _useState = useState(30),\n      _useState2 = _slicedToArray(_useState, 2),\n      pixelSize = _useState2[0],\n      setPixelSize = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      portrait = _useState4[0],\n      setPortrait = _useState4[1];\n\n  var _useWindowDimensions = useWindowDimensions(),\n      width = _useWindowDimensions.width,\n      height = _useWindowDimensions.height;\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      theme3d = _useState6[0],\n      setTheme3d = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      nextRender = _useState8[0],\n      setNextRender = _useState8[1];\n\n  var stageRef = useRef(null);\n  useEffect(function () {\n    var pixelSizeHeight = height / 20;\n    var pixelSizeWidth = width / 32;\n\n    if (portrait) {\n      pixelSizeHeight = height / 26;\n      pixelSizeWidth = width / 12;\n    }\n\n    setPixelSize(pixelSizeWidth < pixelSizeHeight ? pixelSizeWidth : pixelSizeHeight);\n    setPortrait(height > width);\n  }, [width, height, portrait]);\n  useEffect(function () {\n    if (!player.next) return;\n    setNextRender(getRenderizacaoBloco(player.next.bloco));\n  }, [player.next]);\n  useEffect(function () {\n    if (!lose) {\n      stageRef.current.focus();\n    }\n  }, [lose]);\n  useEffect(function () {\n    stageRef.current.focus();\n  }, [theme3d]);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207\n    },\n    __self: this\n  }, React.createElement(Game, {\n    portrait: portrait,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  }, nextRender && React.createElement(ContainerNext, {\n    portrait: portrait,\n    pixelSize: pixelSize,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210\n    },\n    __self: this\n  }, React.createElement(Next, {\n    portrait: portrait,\n    theme3d: theme3d,\n    pixelSize: pixelSize,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }, nextRender.map(function (row, y) {\n    return React.createElement(Row, {\n      pixelSize: pixelSize,\n      key: \"row-\".concat(y),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, row.map(function (pixel, x) {\n      var topBloco = pixel && (!nextRender[y - 1] || !nextRender[y - 1][x]);\n      return React.createElement(Pixel, {\n        paused: paused,\n        theme3d: theme3d,\n        topBloco: topBloco,\n        zIndex: y,\n        pixelSize: pixelSize,\n        key: \"pixel-\".concat(x),\n        fill: pixel,\n        color: player.next.color,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      });\n    }));\n  })), React.createElement(ContainerSwitch, {\n    portrait: portrait,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232\n    },\n    __self: this\n  }, React.createElement(Switch, {\n    width: pixelSize * 2,\n    height: pixelSize / 1.2,\n    onChange: setTheme3d,\n    checked: theme3d,\n    offColor: \"#000\",\n    onColor: \"#444\",\n    uncheckedIcon: React.createElement(Center, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, React.createElement(Pixel, {\n      theme3d: false,\n      pixelSize: pixelSize / 3,\n      stage: \"true\",\n      fill: 1,\n      color: \"#e54b4b\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    })),\n    checkedIcon: React.createElement(Center, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, React.createElement(Pixel, {\n      theme3d: \"true\",\n      pixelSize: pixelSize / 3,\n      stage: \"true\",\n      fill: 1,\n      color: \"#e54b4b\",\n      topBloco: \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233\n    },\n    __self: this\n  }))), map && React.createElement(StyledStage, Object.assign({\n    ref: stageRef\n  }, others, {\n    theme3d: theme3d,\n    pixelSize: pixelSize,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268\n    },\n    __self: this\n  }), map.map(function (row, y) {\n    return React.createElement(Row, {\n      stage: \"true\",\n      pixelSize: pixelSize,\n      key: \"row-\".concat(y),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, row.map(function (pixel, x) {\n      var playerFill = player.bloco.bloco[y - player.pos[0]] && player.bloco.bloco[y - player.pos[0]][x - player.pos[1]];\n      var playerHint = hint.bloco.bloco[y - hint.pos[0]] && hint.bloco.bloco[y - hint.pos[0]][x - hint.pos[1]];\n      var topBloco = (playerFill || pixel.fill) && (!player.bloco.bloco[y - player.pos[0] - 1] || !player.bloco.bloco[y - player.pos[0] - 1][x - player.pos[1]]) && (!map[y - 1] || !map[y - 1][x].fill);\n      var zIndex = !playerFill && !pixel.fill && playerHint ? 99 : y;\n      return React.createElement(Pixel, {\n        paused: paused,\n        theme3d: theme3d,\n        hint: !pixel.fill && !playerFill && playerHint,\n        pixelSize: pixelSize,\n        stage: \"true\",\n        key: \"pixel-\".concat(x),\n        fill: pixel.fill || playerFill,\n        color: playerFill ? player.bloco.color : pixel.color,\n        playerColor: player.bloco.color,\n        topBloco: topBloco,\n        zIndex: zIndex,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      });\n    }));\n  })), status && React.createElement(ContainerStatus, {\n    portrait: portrait,\n    pixelSize: pixelSize,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305\n    },\n    __self: this\n  }, React.createElement(StatusRow, {\n    backgroundColor: theme3d ? \"#444\" : \"black\",\n    portrait: portrait,\n    borderSize: pixelSize / 10,\n    margin: pixelSize / 3,\n    padding: pixelSize / 2,\n    title: \"SCORE\",\n    value: status.score,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306\n    },\n    __self: this\n  }), React.createElement(StatusRow, {\n    backgroundColor: theme3d ? \"#444\" : \"black\",\n    portrait: portrait,\n    borderSize: pixelSize / 10,\n    margin: pixelSize / 3,\n    padding: pixelSize / 2,\n    title: \"LEVEL\",\n    value: status.level,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315\n    },\n    __self: this\n  }), React.createElement(StatusRow, {\n    backgroundColor: theme3d ? \"#444\" : \"black\",\n    portrait: portrait,\n    borderSize: pixelSize / 10,\n    margin: pixelSize / 3,\n    padding: pixelSize / 2,\n    title: \"LINES\",\n    value: status.lines,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324\n    },\n    __self: this\n  }))), lose && React.createElement(LoseGame, {\n    portrait: portrait,\n    restartClick: restartClick,\n    status: status,\n    pixelSize: pixelSize,\n    theme3d: theme3d,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337\n    },\n    __self: this\n  }));\n};\n\nexport default Stage;","map":{"version":3,"sources":["/Users/davidnabilgerges/Downloads/End-to-End-Kubernetes-DevSecOps-Tetris-Project/Tetris-V2/src/components/Stage/index.js"],"names":["React","useState","useEffect","useRef","styled","Switch","useWindowDimensions","background","StatusRow","LoseGame","Color","Game","div","props","portrait","ContainerNext","pixelSize","Next","theme3d","StyledStage","Center","Row","stage","Pixel","memo","fill","color","zIndex","paused","topBloco","lighten","hint","playerColor","alpha","ContainerSwitch","ContainerStatus","getRenderizacaoBloco","bloco","trimRowBloco","sumColumn","forEach","row","y","rowSum","pixel","push","x","trimBloco","newRow","Stage","lose","restartClick","map","player","status","others","setPixelSize","setPortrait","width","height","setTheme3d","nextRender","setNextRender","stageRef","pixelSizeHeight","pixelSizeWidth","next","current","focus","playerFill","pos","playerHint","score","level","lines"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport Switch from \"react-switch\";\n\nimport useWindowDimensions from \"../../hooks/useWindowDimensions\";\nimport background from \"../../images/background.jpg\";\nimport StatusRow from \"../StatusRow\";\nimport LoseGame from '../LoseGame';\n\nimport Color from \"color\";\n\nconst Game = styled.div`\n\twidth: 100vw;\n\theight: ${props => (props.portrait ? \"95\" : \"100\")}vh;\n\tdisplay: flex;\n\tflex-direction: ${props => (props.portrait ? \"column\" : \"row\")};\n\tjustify-content: center;\n\talign-items: center;\n\tbackground-image: url(${background});\n\tbackground-size: cover;\n\tbackground-position: center;\n`;\n\nconst ContainerNext = styled.div`\n\t${props =>\n\t\t!props.portrait && `height: ${props.pixelSize * 18 + (18 / 3) * 1}px;`}\n\t${props => props.portrait && `width: ${props.pixelSize * 10 + (10 / 3) * 1}px;`}\n\tmargin-right: ${props => (props.portrait ? 0 : props.pixelSize / 3)}px;\n\tmargin-bottom: ${props => (props.portrait ? props.pixelSize / 3 : 0)}px;\n\tdisplay: flex;\n\tflex-direction: ${props => (props.portrait ? \"row\" : \"column\")};\n\tjustify-content: ${props => (props.portrait ? \"space-between\" : \"flex-start\")};\n\talign-items: center;\n`;\n\nconst Next = styled.div`\n\twidth: ${props => props.pixelSize * 3}px;\n\theight: ${props => props.pixelSize * 3}px;\n\tbackground-color: ${props => (props.theme3d ? \"#444\" : \"black\")};\n\ttransition: background-color 0.5;\n\tborder: ${props => props.pixelSize / 10}px solid white;\n\toverflow: hidden;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\tmargin-bottom: ${props => (props.portrait ? 0 : props.pixelSize / 3)}px;\n\tmargin-right: ${props => (!props.portrait ? 0 : props.pixelSize / 3)}px;\n`;\n\nconst StyledStage = styled.div`\n\tborder: ${props => props.pixelSize / 10}px solid white;\n\tbackground-color: ${props => (props.theme3d ? \"#444\" : \"black\")};\n\ttransition: background-color 0.5s;\n\toverflow: hidden;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n`;\n\nconst Center = styled.div`\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n`;\n\nconst Row = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: center;\n\theight: ${props => (props.stage ? props.pixelSize : props.pixelSize / 1.6)}px;\n`;\n\nconst Pixel = React.memo(styled.div`\n\twidth: ${props => (props.stage ? props.pixelSize : props.pixelSize / 1.6)}px;\n\theight: ${props => (props.stage ? props.pixelSize : props.pixelSize / 1.6)}px;\n\tbackground-color: ${props => (props.fill === 1 ? props.color : \"inherited\")};\n\tposition: relative;\n\tz-index: ${props => props.zIndex};\n\n\t${props =>\n\t\tprops.paused &&\n\t\t`\n\t\ttransition: all 1s;\n\t`};\n\n\t${props =>\n\t\tprops.fill &&\n\t\tprops.theme3d &&\n\t\t`;\n\t\tbox-shadow: ${props.pixelSize / 4.16}px ${props.pixelSize /\n\t\t\t4.16}px ${props.pixelSize / 5.55}px #222${\n\t\t\tprops.topBloco\n\t\t\t\t? `, 0 ${-props.pixelSize / 4.16}px 0 ${Color(props.color).lighten(0.2)}`\n\t\t\t\t: \"\"\n\t\t} \n\t`};\n\n\t${props =>\n\t\t!props.theme3d &&\n\t\t`\n\t\tborder-left: 1px solid ${\n\t\t\tprops.stage || props.fill || props.hint ? \"#222\" : \"black\"\n\t\t};\n\t\tborder-top: 1px solid ${\n\t\t\tprops.stage || props.fill || props.hint ? \"#222\" : \"black\"\n\t\t};\t\n\t`};\n\n\t${props =>\n\t\tprops.hint &&\n\t\t`\n\t\tborder: 1px solid ${Color(props.playerColor).alpha(0.5)};\n\t\tbackground-color: rgba(255,255,255,0.1);\n\t`};\n`);\n\nconst ContainerSwitch = styled.div`\n\t${props =>\n\t\tprops.portrait &&\n\t\t`\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\talign-items: flex-end;\n\t\tflex-direction: column;\n\t\tjustify-content: flex-end;\n\t`};\n`;\n\nconst ContainerStatus = styled.div`\n\twidth: ${props => props.pixelSize * 8}px;\n\t${props =>\n\t\t!props.portrait && `height: ${props.pixelSize * 18 + (18 / 3) * 1}px;`}\n\t${props => props.portrait && `width: ${props.pixelSize * 10 + (10 / 3) * 1}px;`}\n\tmargin-left: ${props => (props.portrait ? 0 : props.pixelSize / 3)}px;\n\tmargin-top: ${props => (props.portrait ? props.pixelSize / 3 : 0)}px;\n\tdisplay: flex;\n\tflex-direction: ${props => (props.portrait ? \"row\" : \"column\")};\n\talign-items: center;\n\tjustify-content: ${props => (props.portrait ? \"space-between\" : \"flex-start\")};\n\tfont-size: ${props => props.pixelSize}px;\n`;\n\nconst getRenderizacaoBloco = bloco => {\n\tlet trimRowBloco = [];\n\tlet sumColumn = {};\n\tbloco.forEach((row, y) => {\n\t\tlet rowSum = 0;\n\t\trow.forEach(pixel => (rowSum = rowSum + pixel));\n\t\tif (rowSum > 0) trimRowBloco.push(row);\n\t\trow.forEach((pixel, x) => {\n\t\t\tsumColumn[x] = (sumColumn[x] ? sumColumn[x] : 0) + pixel;\n\t\t});\n\t});\n\tlet trimBloco = [];\n\ttrimRowBloco.forEach((row, y) => {\n\t\tlet newRow = [];\n\t\trow.forEach((pixel, x) => {\n\t\t\tif (sumColumn[x] > 0) newRow.push(pixel);\n\t\t});\n\t\ttrimBloco.push(newRow);\n\t});\n\treturn trimBloco;\n};\n\nconst Stage = ({ lose, restartClick, map, player, hint, status, paused, ...others }) => {\n\tconst [pixelSize, setPixelSize] = useState(30);\n\tconst [portrait, setPortrait] = useState(false);\n\tconst { width, height } = useWindowDimensions();\n\tconst [theme3d, setTheme3d] = useState(false);\n\tconst [nextRender, setNextRender] = useState();\n\tconst stageRef = useRef(null);\n\n\tuseEffect(() => {\n\t\tlet pixelSizeHeight = height / 20;\n\t\tlet pixelSizeWidth = width / 32;\n\t\tif (portrait) {\n\t\t\tpixelSizeHeight = height / 26;\n\t\t\tpixelSizeWidth = width / 12;\n\t\t}\n\t\tsetPixelSize(\n\t\t\tpixelSizeWidth < pixelSizeHeight ? pixelSizeWidth : pixelSizeHeight\n\t\t);\n\t\tsetPortrait(height > width);\n\t}, [width, height, portrait]);\n\n\tuseEffect(() => {\n\t\tif (!player.next) return;\n\t\tsetNextRender(getRenderizacaoBloco(player.next.bloco));\n\t}, [player.next]);\n\n\tuseEffect(() => {\n\t\tif (!lose) {\n\t\t\tstageRef.current.focus();\n\t\t}\n\t}, [lose]);\n\n\tuseEffect(() => {\n\t\tstageRef.current.focus();\n\t}, [theme3d]);\n\n\treturn (\n\t\t<div>\n\t\t\t<Game portrait={portrait}>\n\t\t\t\t{nextRender && (\n\t\t\t\t\t<ContainerNext portrait={portrait} pixelSize={pixelSize}>\n\t\t\t\t\t\t<Next portrait={portrait} theme3d={theme3d} pixelSize={pixelSize}>\n\t\t\t\t\t\t\t{nextRender.map((row, y) => (\n\t\t\t\t\t\t\t\t<Row pixelSize={pixelSize} key={`row-${y}`}>\n\t\t\t\t\t\t\t\t\t{row.map((pixel, x) => {\n\t\t\t\t\t\t\t\t\t\tlet topBloco = pixel && (!nextRender[y - 1] || !nextRender[y - 1][x]);\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<Pixel\n\t\t\t\t\t\t\t\t\t\t\t\tpaused={paused}\n\t\t\t\t\t\t\t\t\t\t\t\ttheme3d={theme3d}\n\t\t\t\t\t\t\t\t\t\t\t\ttopBloco={topBloco}\n\t\t\t\t\t\t\t\t\t\t\t\tzIndex={y}\n\t\t\t\t\t\t\t\t\t\t\t\tpixelSize={pixelSize}\n\t\t\t\t\t\t\t\t\t\t\t\tkey={`pixel-${x}`}\n\t\t\t\t\t\t\t\t\t\t\t\tfill={pixel}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={player.next.color}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Next>\n\t\t\t\t\t\t<ContainerSwitch portrait={portrait}>\n\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\twidth={pixelSize * 2}\n\t\t\t\t\t\t\t\theight={pixelSize / 1.2}\n\t\t\t\t\t\t\t\tonChange={setTheme3d}\n\t\t\t\t\t\t\t\tchecked={theme3d}\n\t\t\t\t\t\t\t\toffColor=\"#000\"\n\t\t\t\t\t\t\t\tonColor=\"#444\"\n\t\t\t\t\t\t\t\tuncheckedIcon={\n\t\t\t\t\t\t\t\t\t<Center>\n\t\t\t\t\t\t\t\t\t\t<Pixel\n\t\t\t\t\t\t\t\t\t\t\ttheme3d={false}\n\t\t\t\t\t\t\t\t\t\t\tpixelSize={pixelSize / 3}\n\t\t\t\t\t\t\t\t\t\t\tstage=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tfill={1}\n\t\t\t\t\t\t\t\t\t\t\tcolor={\"#e54b4b\"}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Center>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcheckedIcon={\n\t\t\t\t\t\t\t\t\t<Center>\n\t\t\t\t\t\t\t\t\t\t<Pixel\n\t\t\t\t\t\t\t\t\t\t\ttheme3d=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tpixelSize={pixelSize / 3}\n\t\t\t\t\t\t\t\t\t\t\tstage=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tfill={1}\n\t\t\t\t\t\t\t\t\t\t\tcolor={\"#e54b4b\"}\n\t\t\t\t\t\t\t\t\t\t\ttopBloco=\"true\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Center>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ContainerSwitch>\n\t\t\t\t\t</ContainerNext>\n\t\t\t\t)}\n\t\t\t\t{map && (\n\t\t\t\t\t<StyledStage ref={stageRef} {...others} theme3d={theme3d} pixelSize={pixelSize}>\n\t\t\t\t\t\t{map.map((row, y) => (\n\t\t\t\t\t\t\t<Row stage=\"true\" pixelSize={pixelSize} key={`row-${y}`}>\n\t\t\t\t\t\t\t\t{row.map((pixel, x) => {\n\t\t\t\t\t\t\t\t\tlet playerFill =\n\t\t\t\t\t\t\t\t\t\tplayer.bloco.bloco[y - player.pos[0]] &&\n\t\t\t\t\t\t\t\t\t\tplayer.bloco.bloco[y - player.pos[0]][x - player.pos[1]];\n\t\t\t\t\t\t\t\t\tlet playerHint =\n\t\t\t\t\t\t\t\t\t\thint.bloco.bloco[y - hint.pos[0]] &&\n\t\t\t\t\t\t\t\t\t\thint.bloco.bloco[y - hint.pos[0]][x - hint.pos[1]];\n\t\t\t\t\t\t\t\t\tlet topBloco =\n\t\t\t\t\t\t\t\t\t\t(playerFill || pixel.fill) &&\n\t\t\t\t\t\t\t\t\t\t(!player.bloco.bloco[y - player.pos[0] - 1] ||\n\t\t\t\t\t\t\t\t\t\t\t!player.bloco.bloco[y - player.pos[0] - 1][x - player.pos[1]]) &&\n\t\t\t\t\t\t\t\t\t\t(!map[y - 1] || !map[y - 1][x].fill);\n\t\t\t\t\t\t\t\t\tlet zIndex = !playerFill && !pixel.fill && playerHint ? 99 : y;\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<Pixel\n\t\t\t\t\t\t\t\t\t\t\tpaused={paused}\n\t\t\t\t\t\t\t\t\t\t\ttheme3d={theme3d}\n\t\t\t\t\t\t\t\t\t\t\thint={!pixel.fill && !playerFill && playerHint}\n\t\t\t\t\t\t\t\t\t\t\tpixelSize={pixelSize}\n\t\t\t\t\t\t\t\t\t\t\tstage=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tkey={`pixel-${x}`}\n\t\t\t\t\t\t\t\t\t\t\tfill={pixel.fill || playerFill}\n\t\t\t\t\t\t\t\t\t\t\tcolor={playerFill ? player.bloco.color : pixel.color}\n\t\t\t\t\t\t\t\t\t\t\tplayerColor={player.bloco.color}\n\t\t\t\t\t\t\t\t\t\t\ttopBloco={topBloco}\n\t\t\t\t\t\t\t\t\t\t\tzIndex={zIndex}\n\t\t\t\t\t\t\t\t\t\t></Pixel>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</StyledStage>\n\t\t\t\t)}\n\t\t\t\t{status && (\n\t\t\t\t\t<ContainerStatus portrait={portrait} pixelSize={pixelSize}>\n\t\t\t\t\t\t<StatusRow\n\t\t\t\t\t\t\tbackgroundColor={theme3d ? \"#444\" : \"black\"}\n\t\t\t\t\t\t\tportrait={portrait}\n\t\t\t\t\t\t\tborderSize={pixelSize / 10}\n\t\t\t\t\t\t\tmargin={pixelSize / 3}\n\t\t\t\t\t\t\tpadding={pixelSize / 2}\n\t\t\t\t\t\t\ttitle=\"SCORE\"\n\t\t\t\t\t\t\tvalue={status.score}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<StatusRow\n\t\t\t\t\t\t\tbackgroundColor={theme3d ? \"#444\" : \"black\"}\n\t\t\t\t\t\t\tportrait={portrait}\n\t\t\t\t\t\t\tborderSize={pixelSize / 10}\n\t\t\t\t\t\t\tmargin={pixelSize / 3}\n\t\t\t\t\t\t\tpadding={pixelSize / 2}\n\t\t\t\t\t\t\ttitle=\"LEVEL\"\n\t\t\t\t\t\t\tvalue={status.level}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<StatusRow\n\t\t\t\t\t\t\tbackgroundColor={theme3d ? \"#444\" : \"black\"}\n\t\t\t\t\t\t\tportrait={portrait}\n\t\t\t\t\t\t\tborderSize={pixelSize / 10}\n\t\t\t\t\t\t\tmargin={pixelSize / 3}\n\t\t\t\t\t\t\tpadding={pixelSize / 2}\n\t\t\t\t\t\t\ttitle=\"LINES\"\n\t\t\t\t\t\t\tvalue={status.lines}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ContainerStatus>\n\t\t\t\t)}\n\t\t\t</Game>\n\t\t\t{ lose && \n\t\t\t\t<LoseGame portrait={portrait} restartClick={restartClick} status={status} pixelSize={pixelSize} theme3d={theme3d}>\n\t\t\t\t</LoseGame>}\n\t\t</div>\n\t);\n};\n\nexport default Stage;\n"]},"metadata":{},"sourceType":"module"}